{% extends 'base.html.twig' %}

{% block title %}Career Opportunities - MindForge{% endblock %}

{% block hero %}
<div class="hero-area section">
	<div class="bg-image bg-parallax overlay" style="background-image:url({{ asset('user/img/page-background.jpg') }})"></div>
	<div class="container">
		<div class="row">
			<div class="col-md-10 col-md-offset-1 text-center">
				<ul class="hero-area-tree">
					<li><a href="{{ path('app_home') }}">Home</a></li>
					<li>Careers</li>
				</ul>
				<h1 class="white-text">Career Opportunities</h1>
				<p class="white-text lead">Find your next internship, job, or career opportunity</p>
			</div>
		</div>
	</div>
</div>
{% endblock %}

{% block content %}
<div class="section">
	<div class="container">

		<!-- Search Form -->
		<div class="contact-form" style="margin-bottom: 40px; padding: 30px; background: #fff; border-radius: 4px; box-shadow: 0 2px 10px rgba(0,0,0,0.08);">
			<form method="get" action="{{ path('app_carriere_opportunity_index') }}">
				<div class="row">
					<div class="col-md-4">
						<div class="form-group">
							<input type="text" name="keyword" class="input"
								   placeholder="Job title or keyword..."
								   value="{{ search.keyword }}">
						</div>
					</div>
					<div class="col-md-3">
						<div class="form-group">
							<select name="type" class="input">
								<option value="">All Types</option>
								<option value="internship" {% if search.type == 'internship' %}selected{% endif %}>Internship</option>
								<option value="apprenticeship" {% if search.type == 'apprenticeship' %}selected{% endif %}>Apprenticeship</option>
								<option value="fulltime" {% if search.type == 'fulltime' %}selected{% endif %}>Full-time</option>
								<option value="parttime" {% if search.type == 'parttime' %}selected{% endif %}>Part-time</option>
								<option value="freelance" {% if search.type == 'freelance' %}selected{% endif %}>Freelance</option>
							</select>
						</div>
					</div>
					<div class="col-md-3">
						<div class="form-group">
							<input type="text" name="location" class="input"
								   placeholder="Location..."
								   value="{{ search.location }}">
						</div>
					</div>
					<div class="col-md-2">
						<button type="submit" class="main-button icon-button">
							<i class="fa fa-search"></i> Search
						</button>
					</div>
				</div>
			</form>
		</div>

		{% if is_granted('ROLE_COMPANY') %}
		<div style="margin-bottom: 30px;">
			<a href="{{ path('app_carriere_opportunity_new') }}" class="main-button icon-button">
				<i class="fa fa-plus"></i> Post New Opportunity
			</a>
		</div>
		{% endif %}

		<!-- Opportunities Grid -->
		{% if opportunities|length > 0 %}
			<div class="row">
				{% for opportunity in opportunities %}
				<div class="col-md-6">
					<div class="single-blog" style="margin-bottom: 30px;">
						<div class="blog-img" style="background: linear-gradient(135deg, #6C3BAA 0%, #374050 100%); padding: 30px; min-height: 140px;">
							<h3 style="color: #fff; margin: 0 0 10px 0;">
								<a href="{{ path('app_carriere_opportunity_show', {id: opportunity.id}) }}" style="color: #fff;">
									{{ opportunity.title }}
								</a>
							</h3>
							<p style="color: rgba(255,255,255,0.85); margin: 0;">
								{% if opportunity.company %}
									<i class="fa fa-building"></i> {{ opportunity.company.name }}
								{% else %}
									<i class="fa fa-building"></i> Company not specified
								{% endif %}
							</p>
							{% if opportunity.location %}
								<p style="color: rgba(255,255,255,0.85); margin: 5px 0 0 0;">
									<i class="fa fa-map-marker"></i> {{ opportunity.location }}
								</p>
							{% endif %}
						</div>
						<div class="blog-content" style="padding: 20px;">
							<div style="margin-bottom: 15px;">
								<span class="label label-primary">{{ opportunity.type|capitalize }}</span>
								{% if opportunity.duration %}
									<span class="label label-info">{{ opportunity.duration }}</span>
								{% endif %}
								{% if opportunity.deadline %}
									<span class="label label-warning">
										Deadline: {{ opportunity.deadline|date('M d, Y') }}
									</span>
								{% endif %}
							</div>
							<p class="text-muted">
								{{ opportunity.description|length > 150 ? opportunity.description|slice(0, 150) ~ '...' : opportunity.description }}
							</p>
							<a href="{{ path('app_carriere_opportunity_show', {id: opportunity.id}) }}" class="main-button icon-button">
								View Details <i class="fa fa-arrow-right"></i>
							</a>
						</div>
					</div>
				</div>
				{% endfor %}
			</div>
		{% else %}
			<div class="text-center" style="padding: 60px 0;">
				<i class="fa fa-briefcase" style="font-size: 64px; color: #ccc; margin-bottom: 20px; display: block;"></i>
				<h3>No career opportunities found</h3>
				<p class="text-muted">No opportunities match your current search criteria.</p>
				{% if search.keyword or search.type or search.location %}
					<a href="{{ path('app_carriere_opportunity_index') }}" class="main-button icon-button" style="margin-top: 15px;">
						<i class="fa fa-refresh"></i> Clear Filters
					</a>
				{% endif %}
			</div>
		{% endif %}

	</div>
</div>
{% endblock %}
